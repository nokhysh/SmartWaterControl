# SmartWaterControl

## 概要
SmartWaterControlは、IoTを活用した植物の自動給水システムです。センサーで水分量を測定し、必要に応じてLINE通知を送信します。さらに、履歴を記録し、データをグラフ化して可視化します。外出先からリモートで給水状況を確認し、操作することも可能です。

---

## 要件定義

### 基本機能
1. 自動給水  
   - 毎日設定された時間に植物に水を供給します。
2. 水分量の監視  
   - センサーで水分量を測定し、データをサーバーに送信します。
3. 不足時の通知  
   - 水分量が不足した場合、LINE Notifyを通じてユーザーに通知します。

### 拡張機能
1. 履歴記録と可視化  
   - 毎日の水分量を記録し、グラフとして表示。植物の成長具合を確認可能。
2. リモート操作  
   - 外出先からリモートで給水状況を確認し、手動で給水操作を実行可能。

### セッション管理
1. セッションの保持  
   - ユーザーがログイン後、一定期間セッションを保持し、再ログインを不要にします。
   - セッションの有効期間は30日間（変更可能）。
   - セッションはHTTPS通信と暗号化されたセッショントークンを使用して安全に管理します。

---

## セキュリティ
1. HTTPS通信  
   - 通信内容を暗号化し、安全なデータのやり取りを実現。
2. 認証機能  
   - ログイン機能を導入し、リモート操作やデータ閲覧時の不正アクセスを防止。
3. セッションタイムアウト  
   - セッションの有効期限が切れると、自動的にログアウトし、再ログインを促します。

---

## システム構成
1. M5StickCPlus2  
   - 水分量センサーのデータを取得し、サーバーと通信。
2. Flaskサーバー  
   - データを保存・可視化し、リモート操作や通知を管理。
3. LINE Notify  
   - 水分量不足時にユーザーに通知。

---

## 使用技術
- デバイス: M5StickCPlus2、水分センサー
- バックエンド: Flask（Python）
- データベース: SQLite3
- 通知: LINE Notify
- セキュリティ: HTTPS通信、ユーザー認証、セッション管理

---

## セッション保持のメリット
1. ユーザー体験の向上  
   - 頻繁にログインする必要がなく、操作が簡単。
2. セキュリティの確保  
   - セッションタイムアウトにより、不正アクセスを防止。
3. 柔軟な運用  
   - セッションの有効期限や管理ポリシーを要件に応じて変更可能。

---

## リポジトリの使い方

1. 必要なデバイスを準備  
   - M5StickCPlus2と水分センサーを設定。
2. Flaskサーバーのセットアップ  
   - Flaskサーバーをローカルまたはクラウド環境で起動。
3. システムを稼働  
   - M5StickCPlus2を稼働させてデータを送信。
4. リモート操作と通知を確認  
   - LINE Notifyやダッシュボードを活用して状態を管理。

---

## ライセンス
このプロジェクトはMITライセンスの下で提供されます。
